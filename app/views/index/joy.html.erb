<html>
    <head>
      <title>Joy's Timeline</title>
      <meta charset="utf-8">
      <meta name="description" content="TimelineJS example">
      <meta name="apple-mobile-web-app-capable" content="yes">
      <meta name="apple-touch-fullscreen" content="yes">
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
      <!-- Style-->
      <style>
          html, body {
              height:100%;
              padding: 0px;
              margin: 0px;
          }
      </style>
      <!-- HTML5 shim, for IE6-8 support of HTML elements--><!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    </head>
    <body>
    <div id="timeline-embed"></div>
        <script type="text/javascript">
          var JOY = {};
          JOY.images = "<%=@images%>";
          var links = JOY.images.split(',');
          events = [];

          links.forEach(function(link){

              var date = link.match(/(\d{4})(-|\/)(\d{2})(-|\/)(\d{2})/)[0].split("-").join(",");
              var event = {
                  'startDate' : date,
                  'endDate' : date,
                  'headline' : '开心的成长',
                  'text' : '',
                  'asset' : {
                      'media' :link,
                      'credit' : '',
                      'caption' : ''
                  }
              };
              events.push(event);
          });

          timelineJson = {
              'timeline' : {
                  'headline' :"Joy's timeline",
                  'type' : 'default',
                  'text' : '记录陈霂嫣成长的点点滴滴',
                  'startDate' : '2014年5月3日',
                  'date' : events
              }
          };

          var timeline_config = {
              width: "100%",
              height: "100%",
              source: timelineJson
          };
        </script>
        <script type="text/javascript" src="build/js/storyjs-embed.js"></script>
    </body>
</html>